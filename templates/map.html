<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Mapbox Map</title>

		<script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
		<link
			href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css"
			rel="stylesheet"
		/>
		<style>
			body {
				margin: 0;
				padding: 0;
			}
			#map {
				width: 800px;
				height: 500px;
			}

			#parks_info {
				margin: 1em;
			}
		</style>
	</head>
	<body>
		<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.js"></script>
		<link
			rel="stylesheet"
			href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.css"
			type="text/css"
		/>
		<div id="parks_info">
			<h1>{{ name }}</h1>
			<p>{{ address }}</p>
			<ul>
				{% for activity in activities %}
				<li>{{ activity[0] }}</li>
				{% endfor %}
			</ul>
			<a href="{{ url }}" target="_blank">Redirect to the official DNR page.</a>
		</div>
		<div id="map"></div>
		<div id="weather">
			<img src="http://wttr.in/{{ latlng }}_p.png">
		</div>
		<script>
			mapboxgl.accessToken = "{{ token }}";

			const map = new mapboxgl.Map({
				container: 'map',
			     style: 'mapbox://styles/mapbox/outdoors-v11',
			     center: {{ lnglat }}, // starting position [lng, lat]
			     zoom: 13 // starting zoom
			});

			const marker = new mapboxgl.Marker()
				.setLngLat({{ lnglat }})
				.addTo(map);

			const directions = new MapboxDirections({
				accessToken: mapboxgl.accessToken,
				profile: "mapbox/driving"
			})

			map.addControl(
				directions,
				'top-left'
				);

			directions.setDestination({{ lnglat }});
		</script>
	</body>
</html>
